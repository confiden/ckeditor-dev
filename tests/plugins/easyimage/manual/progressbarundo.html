<h2>Classic editor</h2>

<p><strong>Snapshot contains progressbar: <em id="classic-pb">-</em></strong></p>

<div id="classic">
	<h1>Sample editor</h1>
	<p>Go on, put some content here.</p>
</div>

<h2>Divarea editor</h2>

<p><strong>Snapshot contains progressbar: <em id="divarea-pb">-</em></strong></p>

<div id="divarea">
	<h1>Sample editor</h1>
	<p>Go on, put some content here.</p>
</div>

<h2>Inline editor</h2>

<p><strong>Snapshot contains progressbar: <em id="inline-pb">-</em></strong></p>

<div id="inline" contenteditable="true">
	<h1>Sample editor</h1>
	<p>Go on, put some content here.</p>
</div>

<script src="_helpers/tools.js"></script>
<script>
	if ( CKEDITOR.env.ie && CKEDITOR.env.version < 11 ) {
		bender.ignore();
	}

	var IMG_URL = '%BASE_PATH%_assets/logo.png',
		commonConfig = {
			cloudServices_url: 'https://files.cke-cs.com/upload/',
			cloudServices_token: 'dummy-token',
			on: {
				instanceReady: function( evt ) {
					var editor = evt.editor,
						progressbarElement = document.querySelector( '#' + editor.name + '-pb' ),
						latestSnapshot = null;

					setInterval( function() {
						latestSnapshot = editor.undoManager.snapshots[ editor.undoManager.snapshots.length - 1 ];
						progressbarElement.innerHTML = latestSnapshot.contents.indexOf( 'cke_loader' ) !== -1 ? 'true' : 'false';
					}, 100 );
				}
			}
		};

	window.XMLHttpRequestInterval = 1000;

	window.XMLHttpRequest.responseData = {
		100: IMG_URL,
		200: IMG_URL,
		default: IMG_URL,
		// Unset properties set by the generic XHR mock implementation.
		fileName: undefined,
		uploaded: undefined,
		url: undefined,
		error: undefined
	};

	CKEDITOR.replace( 'classic', commonConfig );
	CKEDITOR.replace( 'divarea', CKEDITOR.tools.extend( {
		extraPlugins: 'divarea'
	}, commonConfig ) );
	CKEDITOR.inline( 'inline', commonConfig );

</script>
